% !TeX TS-program = pdflatex
% !TeX encoding = UTF-8
% !TeX spellcheck = en_US

\documentclass[a4paper]{article}

%define this conditional; plasTeX will override it and set it to `true`
\newif\ifplastex\plastexfalse

%%%%%%%%% early packages that for some reason must be loaded before

\usepackage{setspace}


%% `unicode-math` will change some definitions in `amssymb`
\usepackage{amssymb}

\usepackage{amsmath}

%% makeindex before hyperref
\usepackage{makeidx}
\makeindex

%% some older versions of `hyperref` clash with `iftex`
\usepackage[backref]{hyperref}



%%%%%%%%%% prepare conditionals
% http://ctan.mirror.garr.it/mirrors/CTAN/macros/latex/contrib/iftex/iftex.pdf
% you need a recent version
\usepackage{iftex}

%
%%%%%%%%% use conditionals to load some engine-specific packages
\ifplastex
  % code for plastex
  \newcommand\mathbbm[1]{{\mathbb{#1}}}
\else\iftutex
  % code for xetex or luatex
  \input{preamble_xelatex}
\else
 % code for (pdf)latex
   \input{preamble_pdflatex}
\fi\fi



%%%%%%%%% following are general definitions

\input{preamble_definitions}


\begin{document}
\author{J. Smith
\emph{et al}
}
\title{That papert}

\maketitle


\include{sec0}

\include{sec1}

\include{sec2}

\appendix

\include{seca}

\section*{Table of contents}
\tableofcontents

\printindex

\bibliographystyle{plain}
\bibliography{subdir/paper}

\begin{thebibliography}{19}
\bibitem{latexcompanion}
Michel Goossens, Frank Mittelbach, and Alexander Samarin. 
\newblock \textit{The \LaTeX\ Companion}. 
\newblock Addison-Wesley, Reading, Massachusetts, 1993.

\bibitem{einstein}
Albert Einstein. 
\newblock \textit{Zur Elektrodynamik bewegter Korper}. (German) 
\newblock [\textit{On the electrodynamics of moving bodies}]. 
\newblock Annalen der Physik, 322(10):891â€“921, 1905.

\bibitem{knuthwebsite}
Knuth.
\newblock  Computers and Typesetting,
\newblock \url{https://en.wikipedia.org/wiki/Computers_and_Typesetting}

\end{thebibliography}

\end{document}
  
%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% TeX-engine: xetex
%%% End:
